// TODO tests:
// - basic read/write a bunch of records
// - basic read/write records that are in batches
// - test ack logic for single event batches and for multi-event batches
// - test unacked keys when we have one undecodable read only, then undecodable + valid read, then
//   undecodable + undecodable
// - test initial size is valid with multi-event records
